<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5. Human Data Schema</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        table { width: 100%; border-collapse: collapse; margin-top: 1.5rem; margin-bottom: 1.5rem; }
        th, td { border: 1px solid #e2e8f0; padding: 0.75rem 1rem; text-align: left; vertical-align: top; }
        th { background-color: #f8fafc; font-weight: 600; }
        pre { background-color: #f1f5f9; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; margin-top: 1rem; margin-bottom: 1rem; }
        code { font-family: 'Courier New', Courier, monospace; }
        .prose h1 { font-size: 2.25rem; font-weight: 700; margin-bottom: 1.5rem; border-bottom: 1px solid #e2e8f0; padding-bottom: 0.5rem; }
        .prose h2 { font-size: 1.875rem; font-weight: 600; margin-top: 2.5rem; margin-bottom: 1rem; border-bottom: 1px solid #e2e8f0; padding-bottom: 0.5rem; }
        .prose h3 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
        .prose p, .prose ul { margin-bottom: 1.25rem; line-height: 1.75; }
        .prose ul { list-style-type: disc; padding-left: 1.5rem; }
        .prose a { color: #2563eb; text-decoration: none; font-weight: 500; }
        .prose a:hover { text-decoration: underline; }
        .prose code { background-color: #f1f5f9; padding: 0.2rem 0.4rem; border-radius: 0.25rem; font-size: 0.9em; }
        .sidebar { width: 250px; position: fixed; left: 0; top: 0; height: 100vh; overflow-y: auto; background-color: #1f2937; }
        .content-wrapper { margin-left: 250px; }
        .nav-link { display: block; padding: 0.75rem 1.5rem; color: #d1d5db; text-decoration: none; border-left: 3px solid transparent; }
        .nav-link:hover { background-color: #374151; color: white; }
        .nav-link.active { background-color: #374151; color: white; border-left-color: #3b82f6; font-weight: 600; }
        @media (max-width: 768px) {
            .sidebar { width: 100%; height: auto; position: relative; }
            .content-wrapper { margin-left: 0; }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 antialiased">

    <nav class="sidebar">
        <div class="py-4">
            <a href="overview.html" class="nav-link">1. Overview</a>
            <a href="config_schema.html" class="nav-link">2. Config Schema (config.json)</a>
            <a href="trial_schema.html" class="nav-link">3. Trial Schema (stimuli.jsonl)</a>
            <a href="instruction_schema.html" class="nav-link">4. Instruction Schema</a>
            <a href="human_data_schema.html" class="nav-link active">5. Human Data Schema</a>
        </div>
    </nav>

    <div class="content-wrapper">
    <div class="container mx-auto max-w-4xl p-6 md:p-12 bg-white shadow-lg rounded-lg my-12 prose prose-lg">

        <h1>5. File Specification: Human Data</h1>
        <p>This document outlines the required format for storing anonymized human subject data. The data is split into two files: one for individual participant data (<code>human_data_ind.json</code>) and one for mean/aggregated data (<code>human_data_mean.json</code>).</p>

        <section>
            <h2>5.1. <code>human_data_ind.json</code> (Individual Data)</h2>
            <p>This file contains the raw, anonymized responses for all participants, compiled by trial and question. The root of the JSON is an object where each key is a <code>stimuli_id</code>.</p>

            <h3>5.1.1. Stimulus Data Object Structure</h3>
            <p>Each <code>stimuli_id</code> object contains keys that <strong>must match the <code>tag</code>s</strong> defined in the trial's queries (see <a href="trial_schema.html#queries">Section 3.2</a>). The value for each tag is an array, where each item in the array is the response from a single participant.</p>
            <p>For example, if there were 4 participants, each response array will contain 4 elements.</p>

            <h3>5.1.2. Response Array Structure</h3>
            <p>The data type inside each participant's response array depends on the query <code>type</code> defined in <code>stimuli.jsonl</code>:</p>
            <ul>
                <li><strong><code>single-slider</code>:</strong> Array of Numbers.<br>e.g., <code>"goal_confidence": [95, 88, 70, 92]</code></li>
                <li><strong><code>multi-choice</code>:</strong> Array of Objects.<br>e.g., <code>"agent_goal": [ { "idx": 0, "option_text": "Reaching the red box" }, { "idx": 1, "option_text": "Reaching the blue box" }, ... ]</code></li>
                <li><strong><code>multi-slider</code>:</strong> Array containing a single Object. The object's keys are the slider labels (from the <code>option</code> array in <code>stimuli.jsonl</code>), and its values are Arrays of Numbers (each array contains the response from all participants for that one slider).<br>e.g., <code>"statement_rating": [ { "Statement 1": [80, 75], "Statement 2": [25, 30] } ]</code></li>
                <li><strong><code>multi-select</code>:</strong> Array of Arrays of Integers. Each inner array is a one-hot encoding (0 or 1) of the participant's selections, corresponding to the <code>option</code> array in <code>stimuli.jsonl</code>.<br>e.g., <code>"cities_visited": [ [0, 1, 1, 0], [1, 0, 0, 0] ]</code></li>
                 <li><strong><code>textbox</code>:</strong> Array of Strings.<br>e.g., <code>"strategy_description": [ "The agent seemed...", "It was trying to...", "I think it wanted...", ... ]</code></li>
            </ul>
            
            <h3>5.1.3. Example: <code>human_data_ind.json</code></h3>
            <p>This example corresponds to the query tags defined in the <a href="trial_schema.html">Trial Schema</a> examples, assuming data from 2 participants. The keys <code>"trial_1_1"</code>, <code>"agent_goal"</code>, <code>"goal_confidence"</code>, <code>"statement_rating"</code>, and <code>"strategy_description"</code> are all defined in the <code>stimuli.jsonl</code> file.</p>
            <pre><code>{
  "trial_1_1": {
    "agent_goal": [
      { "idx": 0, "option_text": "Reaching the red box" },
      { "idx": 1, "option_text": "Reaching the blue box" }
    ],
    "goal_confidence": [
      95,
      88
    ]
  },
  "trial_1_2": {
    "statement_rating": [
      { "Statement 1": [80, 70], "Statement 2": [25, 35] }
    ],
    "strategy_description": [
      "The agent seemed to be looking for the red box.",
      "Unsure, but it moved towards the blue box first."
    ]
  }
}</code></pre>
        </section>

        <section>
            <h2>5.2. <code>human_data_mean.json</code> (Mean Data)</h2>
            <p>This file provides a convenient summary of the data, aggregated across all participants. The structure mirrors <code>human_data_ind.json</code>, but replaces the arrays of individual responses with aggregated statistics.</p>
            
            <h3>5.2.1. Structure</h3>
            <p>The structure for each <code>stimuli_id</code> will vary depending on the data type, but generally follows these principles:</p>
            <ul>
                <li><strong><code>single-slider</code> Data (e.g., <code>goal_confidence</code>):</strong> A single Number representing the <code>"mean"</code> of the numbers in the <code>ind</code> array.</li>
                <li><strong><code>multi-choice</code> Data (e.g., <code>agent_goal</code>):</strong> An object where keys are constructed from the <code>tag</code> and the option's 1-based index (e.g., <code>tag_1</code>, <code>tag_2</code>), and values are the counts or proportions.</li>
                <li><strong><code>multi-slider</code> Data (e.g., <code>statement_rating</code>):</strong> An object where keys are constructed from the <code>tag</code> and the option's 1-based index (e.g., <code>tag_1</code>, <code>tag_2</code>), and each value is a single Number representing the <code>"mean"</code>.</li>
                <li><strong><code>textbox</code> or <code>multi-select</code> Data:</strong> Aggregations are optional and task-specific (e.g., keyword counts, selection frequencies).</li>
            </ul>

            <h3>5.2.2. Example: <code>human_data_mean.json</code></h3>
            <p>This example shows the aggregated data for the <code>human_data_ind.json</code> example above. The keys are derived from the <code>tag</code>s in <code>stimuli.jsonl</code> (e.g., <code>agent_goal</code> becomes <code>agent_goal_1</code>, <code>agent_goal_2</code>; <code>statement_rating</code> becomes <code>statement_rating_1</code>, <code>statement_rating_2</code>).</p>
            <pre><code>{
  "trial_1_1": {
    "agent_goal": {
      "agent_goal_1": 1,
      "agent_goal_2": 1
    },
    "goal_confidence": 91.5
  },
  "trial_1_2": {
    "statement_rating": {
      "statement_rating_1": 75,
      "statement_rating_2": 30
    }
  }
}</code></pre>
        </section>

    </div>
    </div>

</body>
</html>

